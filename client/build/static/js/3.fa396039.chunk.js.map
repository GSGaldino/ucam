{"version":3,"sources":["../../src/index.js"],"names":["globalId","HubspotForm","loaded","window","this","el","props","options","target","getAttribute","onFormSubmit","formData","$form","setTimeout","script","document","createElement","form","querySelector","ref","id","style","display","state","loading","Component"],"mappings":"mkBAAA,M,EACA,O,mDAEA,IAAIA,EAAJ,EAEMC,E,YACL,e,4FAAmB,e,mKAAA,mEAElB,QAAa,CACZC,QAAQ,GAET,KAAUF,IACV,aAAkB,kBAAlB,GACA,kBAAuB,uBAAvB,GAPkB,E,+WASN,WACZ,GAAIG,OAAJ,MAAkB,CAEjB,UAAIC,KAAKC,GACR,OAED,IAAIC,EAAQ,EAAR,GACAF,KADJ,cAGOE,EAAP,eACOA,EAAP,gBACOA,EAAP,QACA,IAAIC,EAAU,EAAV,MAEHC,OAAA,IAAYJ,KAAKC,GAAGI,aAFjB,MAGHC,aAAe,YAEd,IAAIC,EAAWC,EAAf,iBACA,uBAIF,OADAT,OAAA,uBACA,EAGAU,WAAWT,KAAX,gB,mCAGW,WACRU,EAASC,SAASC,cAAtB,UACAF,EAAA,SACAA,EAAA,OAAgB,WACf,eACA,qBAEDA,EAAA,mCACAC,SAAA,sB,wCAIA,UAAIX,KAAKC,GAAT,CAGA,IAAIY,EAAOb,KAAKC,GAAGa,cAAnB,UACA,GACCd,KAAA,SAAc,CAAEF,QAAhB,IACIE,KAAKE,MAAT,SACCF,KAAA,kBAIDS,WAAWT,KAAX,sB,0CAIID,OAAD,OAAkBC,KAAKE,MAA3B,UAGCF,KAAA,aACAA,KAAA,mBAHAA,KAAA,e,+EAQO,WACR,OACC,mCACC,+BACCe,IAAK,SAAAd,GAAA,OAAM,KAANA,GACLe,GAAA,mBAAuBhB,KAFxB,GAGCiB,MAAO,CAAEC,QAASlB,KAAKmB,MAAMrB,OAAS,QAA/B,WAENE,KAAKmB,MAAN,QAAsBnB,KAAKE,MAAMkB,a,GAlFZ,UAAMC,W,UAwFjBxB,E","file":"static/js/3.fa396039.chunk.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\n\nlet globalId = 0\n\nclass HubspotForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tloaded: false\n\t\t}\n\t\tthis.id = globalId++\n\t\tthis.createForm = this.createForm.bind(this)\n\t\tthis.findFormElement = this.findFormElement.bind(this)\n\t}\n\tcreateForm() {\n\t\tif (window.hbspt) {\n\t\t\t// protect against component unmounting before window.hbspt is available\n\t\t\tif (this.el === null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet props = {\n\t\t\t\t...this.props\n\t\t\t}\n\t\t\tdelete props.loading\n\t\t\tdelete props.onSubmit\n\t\t\tdelete props.onReady\n\t\t\tlet options = {\n\t\t\t\t...props,\n\t\t\t\ttarget: `#${this.el.getAttribute(`id`)}`,\n\t\t\t\tonFormSubmit : ($form) => {\n\t\t\t\t\t// ref: https://developers.hubspot.com/docs/methods/forms/advanced_form_options\n\t\t\t\t\tvar formData = $form.serializeArray();\n\t\t\t\t\tthis.props.onSubmit(formData);\t\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.hbspt.forms.create(options)\n\t\t\treturn true\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.createForm, 1)\n\t\t}\n\t}\n\tloadScript() {\n\t\tlet script = document.createElement(`script`)\n\t\tscript.defer = true\n\t\tscript.onload = () => {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t\tscript.src = `//js.hsforms.net/forms/v2.js`\n\t\tdocument.head.appendChild(script)\n\t}\n\tfindFormElement(){\n\t\t// protect against component unmounting before form is added\n\t\tif (this.el === null) {\n\t\t\treturn\n\t\t}\n\t\tlet form = this.el.querySelector(`iframe`)\n\t\tif(form){\n\t\t\tthis.setState({ loaded: true })\n\t\t\tif (this.props.onReady) {\n\t\t\t\tthis.props.onReady(form);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.findFormElement, 1)\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tif (!window.hbspt && !this.props.noScript) {\n\t\t\tthis.loadScript()\n\t\t} else {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tref={el => this.el = el}\n\t\t\t\t\tid={`reactHubspotForm${this.id}`}\n\t\t\t\t\tstyle={{ display: this.state.loaded ? 'block' : 'none'}}\n\t\t\t\t\t/>\n\t\t\t\t{!this.state.loaded && this.props.loading}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default HubspotForm\n"],"sourceRoot":""}